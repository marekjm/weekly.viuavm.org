---
layout: post
title:  "Deferred calls. Again."
date:   2017-06-13 23:06:46 +0200
categories: viuavm update weekly deferred-calls
weekly_issue_index: 3
permalink: /issue/3
sections:
    -
        name: Deferred calls
        id: deferred-calls
---

<p>
This week once again was spent on the implementation of deferred calls.
</p>

<hr>

<section>
    <h1 id="{{ page.sections[0].id }}">{{ page.sections[0].name }}</h1>

    <p>
        Deferred calls (when invoked on returns and tail calls) are now run before their frame is popped.
        This allows them to access the values that were defined in their scope (so for example pointers
        work in deferred calls).
    </p>

    <p>
        Invoking deferred calls before popping frames during stack unwinding is not yet implemented.
    </p>

    <p>
        However, deferred calls are now invoked during stack unwinding both when the exception is caught, and
        when it is uncaught.
        This means that the <em>basic</em> functionality of deferred calls is now implemented and what is left
        are just incremental improvements and fixes.
    </p>
</section>
